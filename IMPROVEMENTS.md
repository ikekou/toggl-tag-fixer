# Togglタグ自動補完ツール 改善案

優先度の高い項目にチェックを付けてください。

## 1. CLIオプションの追加

- [x] `--date YYYY-MM-DD`: 特定の日付を指定して実行
- [x] `--dry-run`: 実際に更新せずに対象エントリーを表示（CLAUDE.mdで言及済み）
- [x] `--days N`: 過去N日分を一括処理
- [x] `--today`: 今日の分を処理（デフォルトは昨日）
- [x] `--help`: ヘルプメッセージの表示

## 2. エラーハンドリングの強化

- [x] プロジェクト情報のキャッシュ機能（同じプロジェクトIDを何度も取得しない）
- [x] ネットワークエラー時のリトライ機能（最大3回など）
- [x] 部分的な失敗でも処理を継続する
- [x] より詳細なエラーメッセージ（解決方法の提案を含む）

## 3. 設定の柔軟性向上

- [x] タイムゾーンを.envで設定可能に（現在はJST固定）
- [ ] 複数のタグセットを条件付きで適用（例：時間帯による切り替え）
- [ ] 正規表現でのプロジェクト名マッチング対応
- [ ] config.jsonでタグの追加/置換を選択可能に

## 4. 通知機能

- [ ] 処理完了後にSlackで通知
- [ ] エラー発生時のアラート機能
- [ ] メール通知オプション
- [ ] 処理サマリーの通知（何件処理したか等）

## 5. 統計・分析機能

- [ ] 月次・週次のタグ付け統計レポート生成
- [ ] タグ未設定エントリーの傾向分析
- [ ] プロジェクト別の作業時間集計
- [ ] よく使うプロジェクト×タグの組み合わせ提案

## 6. バックアップ・復元機能

- [ ] 変更前のエントリー情報を自動バックアップ
- [ ] 誤ったタグ付けを元に戻す機能（undo）
- [ ] バックアップの自動削除（30日経過など）

## 7. 設定のバリデーション

- [x] config.jsonの文法チェック
- [x] 存在しないタグの使用を警告
- [x] APIトークンの有効性を事前チェック
- [x] ワークスペースへのアクセス権限確認

## 8. その他の改善案

- [x] インタラクティブモード（対話的にタグを選択）
- [ ] 実行ログの圧縮・アーカイブ機能
- [ ] Docker対応（環境構築の簡素化）
- [ ] GitHub Actions対応（定期実行）
- [ ] 設定のインポート/エクスポート機能

---

## 実装済みの機能

- ✅ 基本的なタグ自動付与機能
- ✅ ログ出力機能（JSON形式）
- ✅ 日本時間（JST）対応
- ✅ 環境変数による設定（.env）
- ✅ プロジェクト名→タグのマッピング（config.json）

---

優先順位を付けたら、このファイルを更新してください。
チェックした項目から順に実装を進めていきます。